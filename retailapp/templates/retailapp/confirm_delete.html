{% extends "billing/base.html" %}
{% load static %}

{% block page_title %}Delete Invoice{% endblock %}

{% block action_button %}
<a href="{% url 'retailapp:invoice_detail' invoice.id %}" class="btn btn-outline-secondary">
    <i class="bi bi-arrow-left"></i> Back
</a>
{% endblock %}

{% block billing_content %}
<section class="invoice-bg">
<div class="row justify-content-center">
    <div class="col-lg-6">
        <div class="card delete-card shadow-lg">
            <div class="card-header text-center">
                <div class="delete-icon mb-3">
                    <i class="bi bi-exclamation-triangle"></i>
                </div>
                <h3 class="text-light mb-2">Confirm Deletion</h3>
                <p class="text-muted mb-0">This action cannot be undone</p>
            </div>
            <div class="card-body">
                <div class="alert alert-danger">
                    <h5 class="alert-heading">
                        <i class="bi bi-info-circle"></i> You are about to delete:
                    </h5>
                    <hr>
                    <p class="mb-1"><strong>Invoice Number:</strong> {{ invoice.invoice_number }}</p>
                    <p class="mb-1"><strong>Customer:</strong> {{ invoice.customer_name }}</p>
                    <p class="mb-1"><strong>Date:</strong> {{ invoice.date|date:"d M Y" }}</p>
                    <p class="mb-0"><strong>Amount:</strong> â‚¹ {{ invoice.final_amount|floatformat:2 }}</p>
                </div>

                <div class="warning-box">
                    <i class="bi bi-shield-exclamation text-warning"></i>
                    <div>
                        <strong>Warning:</strong> Deleting this invoice will:
                        <ul class="mt-2 mb-0">
                            <li>Remove all associated items</li>
                            <li>Remove all return records</li>
                            <li>This data will be marked as inactive</li>
                        </ul>
                    </div>
                </div>

                <form method="post" class="mt-4">
                    {% csrf_token %}
                    <div class="d-flex gap-3 justify-content-center">
                        <button type="submit" class="btn btn-danger btn-lg">
                            <i class="bi bi-trash"></i> Yes, Delete Invoice
                        </button>
                        <a href="{% url 'retailapp:invoice_detail' invoice.id %}" class="btn btn-outline-secondary btn-lg">
                            <i class="bi bi-x-circle"></i> Cancel
                        </a>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>
</section>

<style>
.invoice-bg {
    background: linear-gradient(135deg, #0a0a1f, #121235, #001f3f);
    min-height: 100vh;
    padding: 80px 0;
}

.delete-card {
    background: rgba(255, 255, 255, 0.08);
    backdrop-filter: blur(16px);
    border-radius: 20px;
    border: 1px solid rgba(255, 255, 255, 0.15);
    overflow: hidden;
}

.delete-card .card-header {
    background: linear-gradient(135deg, rgba(220, 53, 69, 0.2), rgba(239, 68, 68, 0.15));
    padding: 40px 30px;
    border: none;
}

.delete-icon {
    width: 80px;
    height: 80px;
    margin: 0 auto;
    background: rgba(220, 53, 69, 0.2);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
}

.delete-icon i {
    font-size: 3rem;
    color: #dc3545;
}

.card-body {
    padding: 30px;
    background: rgba(255, 255, 255, 0.05);
}

.alert-danger {
    background: rgba(220, 53, 69, 0.15);
    border: 1px solid rgba(220, 53, 69, 0.3);
    color: #ff6b6b;
    border-radius: 10px;
}

.alert-heading {
    color: #dc3545;
}

.warning-box {
    background: rgba(255, 193, 7, 0.1);
    border: 1px solid rgba(255, 193, 7, 0.3);
    border-radius: 10px;
    padding: 20px;
    display: flex;
    gap: 15px;
    align-items: flex-start;
}

.warning-box i {
    font-size: 1.5rem;
    flex-shrink: 0;
}

.warning-box strong {
    color: #ffc107;
}

.warning-box ul {
    color: #e0e0e0;
    padding-left: 20px;
}

.btn-danger {
    background: linear-gradient(135deg, #dc3545, #c82333);
    border: none;
    font-weight: 600;
    padding: 12px 30px;
}

.btn-danger:hover {
    background: linear-gradient(135deg, #c82333, #dc3545);
    transform: translateY(-2px);
}

.btn-outline-secondary {
    border: 2px solid rgba(255, 255, 255, 0.2);
    color: #b8b8b8;
    padding: 12px 30px;
}

.btn-outline-secondary:hover {
    background: rgba(255, 255, 255, 0.05);
    border-color: rgba(255, 255, 255, 0.3);
    color: #fff;
}
</style>
{% endblock %}