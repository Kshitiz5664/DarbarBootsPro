{# templates/retail/pdf_invoice.html #}
<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <title>{{ invoice.invoice_number }} - Invoice</title>
  <style>
    body { font-family: Arial, Helvetica, sans-serif; font-size: 12px; color: #111; }
    .header { display:flex; justify-content:space-between; align-items:center; margin-bottom: 10px; }
    .brand { font-size: 18px; font-weight:700; color:#0b6fb3; }
    .meta { text-align:right; font-size:12px; }
    table { width:100%; border-collapse:collapse; margin-top:10px; }
    th, td { border: 1px solid #ddd; padding:8px; text-align:left; }
    th { background:#f5f5f5; }
    .totals { margin-top: 12px; width: 100%; }
    .totals td { border: none; padding:6px; }
    .right { text-align:right; }
    .signature { margin-top: 30px; display:flex; justify-content:space-between; }
    .small { font-size: 11px; color:#555; }
  </style>
</head>
<body>
  <div class="header">
    <div>
      <div class="brand">YOUR SHOP NAME</div>
      <div class="small">Address line 1 • City • GSTIN: XXXXXXXXXX</div>
    </div>
    <div class="meta">
      <div><strong>Invoice:</strong> {{ invoice.invoice_number }}</div>
      <div><strong>Date:</strong> {{ invoice.date }}</div>
      <div><strong>Customer:</strong> {{ invoice.customer_name }} {% if invoice.customer_mobile %}| {{ invoice.customer_mobile }}{% endif %}</div>
    </div>
  </div>

  <table>
    <thead>
      <tr>
        <th>#</th><th>Item</th><th>Qty</th><th>Rate</th><th>GST</th><th>Discount</th><th>Line Total</th>
      </tr>
    </thead>
    <tbody>
      {% for it in items %}
      <tr>
        <td>{{ forloop.counter }}</td>
        <td>{{ it.display_name }}</td>
        <td>{{ it.quantity }}</td>
        <td>₹{{ it.rate }}</td>
        <td>₹{{ it.gst_amount }}</td>
        <td>₹{{ it.discount_amount }}</td>
        <td>₹{{ it.total }}</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>

  {% if returns %}
  <h4>Returns</h4>
  <table>
    <thead><tr><th>#</th><th>Item</th><th>Qty</th><th>Amount</th></tr></thead>
    <tbody>
      {% for r in returns %}
      <tr>
        <td>{{ forloop.counter }}</td>
        <td>{{ r.item.display_name if r.item else "Manual" }}</td>
        <td>{{ r.quantity }}</td>
        <td>₹{{ r.amount }}</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
  {% endif %}

  <table class="totals">
    <tr><td class="right">Base Amount:</td><td class="right">₹{{ invoice.base_amount }}</td></tr>
    <tr><td class="right">Total GST:</td><td class="right">₹{{ invoice.total_gst }}</td></tr>
    <tr><td class="right">Total Discount:</td><td class="right">- ₹{{ invoice.total_discount }}</td></tr>
    <tr><td class="right"><strong>Grand Total:</strong></td><td class="right"><strong>₹{{ invoice.final_amount }}</strong></td></tr>
  </table>

  <div class="signature">
    <div class="small">
      <div>Receiver signature</div>
      <div style="margin-top:40px;">______________________</div>
    </div>
    <div class="small" style="text-align:right;">
      <div>For YOUR SHOP NAME</div>
      <div style="margin-top:40px;">Authorized Signatory</div>
    </div>
  </div>
</body>
</html>
