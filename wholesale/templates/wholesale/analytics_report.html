{% extends "wholesale/base.html" %}
{% block title %}Analytics Report{% endblock %}

{% block content %}
<h2 class="mb-4">Analytics Report</h2>

<h4>Monthly Overview</h4>
<div class="table-responsive">
  <table class="table table-striped table-bordered">
    <thead><tr><th>Month</th><th>Invoiced</th><th>Received</th><th>Invoices</th><th>Payments</th></tr></thead>
    <tbody>
      {% for month in monthly_data %}
      <tr>
        <td>{{ month.month }}</td>
        <td>{{ month.invoiced }}</td>
        <td>{{ month.received }}</td>
        <td>{{ month.invoice_count }}</td>
        <td>{{ month.payment_count }}</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>

<h4 class="mt-5">Party Summary</h4>
<div class="table-responsive">
  <table class="table table-striped table-bordered">
    <thead><tr><th>Party</th><th>Total Invoiced</th><th>Total Paid</th><th>Pending</th><th>Invoices</th><th>Payments</th></tr></thead>
    <tbody>
      {% for party in party_summary %}
      <tr>
        <td>{{ party.name }}</td>
        <td>{{ party.total_invoiced }}</td>
        <td>{{ party.total_paid }}</td>
        <td>{{ party.total_invoiced|add:"-"|add:party.total_paid }}</td>
        <td>{{ party.invoice_count }}</td>
        <td>{{ party.payment_count }}</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>
{% endblock %}
