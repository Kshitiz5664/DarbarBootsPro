{% extends "billing/base.html" %}
{% block page_title %}All Payments{% endblock %}
{% block action_button %}
<a href="{% url 'billing:payment_create' %}" class="btn btn-success">+ New Payment</a>
{% endblock %}

{% block billing_content %}
<div class="table-responsive">
    <table class="table table-hover table-striped align-middle">
        <thead>
            <tr>
                <th>ID</th>
                <th>Party</th>
                <th>Invoice</th>
                <th>Date</th>
                <th>Amount</th>
                <th>Mode</th>
            </tr>
        </thead>
        <tbody>
            {% for payment in object_list %}
            <tr>
                <td>{{ payment.id }}</td>
                <td>{{ payment.party.name }}</td>
                <td>{{ payment.invoice.invoice_number }}</td>
                <td>{{ payment.date }}</td>
                <td>{{ payment.amount }}</td>
                <td>{{ payment.get_mode_display }}</td>
            </tr>
            {% empty %}
            <tr><td colspan="6" class="text-center text-muted">No payments recorded.</td></tr>
            {% endfor %}
        </tbody>
    </table>
</div>
<!-- PDF Auto-Download Script -->
{% if download_payment %}
<script>
document.addEventListener("DOMContentLoaded", () => {

    const iframe = document.createElement("iframe");
    iframe.style.display = "none";
    iframe.src = "{% url 'billing:payment_pdf' download_payment %}";
    document.body.appendChild(iframe);

});
</script>
{% endif %}




{% endblock %}
